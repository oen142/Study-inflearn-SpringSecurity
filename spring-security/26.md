CSRF 어택 방지 필터
4번째 필터

CSRF 어택 방지 필터
- 인증된 유저의 계정을 사용해 악의적인 변경 요청을 만들어 보내는 기법
- CORS를 사용할때 특히 주의해야함.
  타 도메인에서 보내오는 요청을 허용 하기 때문에
  
  
의도한 사용자만 리소스를 변경할수 있도록 사용하는 필터  
  
- CSRF 토큰을 사용하여 방지

공격자 웹 사이트/내 브라우저/ 은행
내브라우저에서 은행으로 로그인
내 브라우저에서 공격자 웹사이트 웹페이지 접속
공격자 웹 사이트에서 내 브라우저로 악의적인 웹 페이지 제공
내 프라우저에서 은행으로 계좌이체

내가 원치 않는 요청을 임의대로 만들어서 보내는 기법

인증서를 발급받아 양방향을 사용하는것.



폼에서 요청을 보내올때 토큰이 일치하는 방법으로 방어를 하고있다.
요청을 보낼때 csrf 토큰을 준다.
그다음에 토큰값이 일치하는지 확인을 한다.

csrf 토큰을 생성해 놓는다
그 토큰을 항상 가지고 들어와야한다.
가령 로그인 폼만 해도 그렇다.

토큰생성 - 로그인 폼 - 토큰이 히든값으로 csrf 토큰을 적어놓는다.
서버에서 보내온 토큰이다. 이폼을 보내면 서버로 간다.
서버로 보냈을때 실제 내가 보내준 토큰하고 실제 폼에서 넘겨온 토큰값하고 일치하는지
확인한다. 확인이 되면 같다면 이 폼데이타는 내가 내 웹사이트에서 제공한 폼으로 들어온 데이터가 맞는지 검증을한다.


사용하기 싫으면
- http.csrf().disable();
 
 필터체인 프록시르 확인을 해보면
 하나가 빠진것을 볼수가 있다.       
 가급적이면 폼 기반의 애플리케이션은 설정해주는것이 좋다.
 rest api 에 csrf 토큰을 적용하는 방법이 있긴한데...
 매번 보내주는게 번거롭기 때문에 disable 할수 있다.
 